# type: ignore
import importlib
import sys
from xonsh.tools import EnvPath
from pathlib import Path

def alias(name: str):
    def deco(func):
        def wrapper(argv):
            return func(*argv)
        aliases[name] = wrapper
        return func
    return deco

def path(s: str) -> str:
    return str(Path(s).expanduser())


$VIRTUALENV_HOME = path("~/Env")
xontrib load zoxide
xontrib load vox
vox activate py312
clear


$PROMPT = "{INTENSE_GREEN}[{cwd}]{RESET}\n"
$PNPM_HOME = path("~/Env/pnpm")
$PATH.add("/usr/lib/ccache/bin", front=True)
$PATH.extend([
    path("~/Bin"),
    path("~/.ghcup/bin"),
    path("~/.cabal/bin"),
    path("~/.cargo/bin"),
    $PNPM_HOME,
])


INCLUDE_PATH = [
    "/usr/local/share/koka/v3.1.2/kklib/include",
    "/home/lambda/.ghcup/ghc/9.10.1/lib/ghc-9.10.1/lib/x86_64-linux-ghc-9.10.1/rts-1.0.2/include",
    "/usr/include/python3.12",
]
$C_INCLUDE_PATH = EnvPath(INCLUDE_PATH)
$CPLUS_INCLUDE_PATH = EnvPath(INCLUDE_PATH)
$LD_LIBRARY_PATH = EnvPath([
    "/usr/local/lib",
])


aliases.update({
    "py": "python",
    "cls": "clear",
    "dpi": "ciadpi -i 127.0.0.1 -p 10801 -s1 -q1 -f-1 -S -b661 -As",
    "pixelorama": "~/Bin/Pixelorama/Pixelorama.x86_64",
    "ror": "r2modman --no-sandbox",
    "config": "nvim ~/.xonshrc",
})

@alias("c")
def vscode(path: str = '.'):
    z @(path)
    code -r --password-store=gnome-libsecret . &

@alias("n")
def neovim(path: str = '.'):
    z @(path)
    nvim .

@alias("ls")
def list_files(path: str = ".", level: int = 2):
    exa @(path) --icons --long --all --tree --level @(level)
